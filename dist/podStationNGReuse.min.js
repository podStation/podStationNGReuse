function parsePodcastFeed(t){function e(t){return t.replace("GTM","GMT")}var i,n="string"==typeof t?$.parseXML(t):t,a=$(n);return a.find("rss > channel")[0]?(i={},i.podcast={},i.episodes=[],i.podcast.title=a.find("rss > channel > title").text(),i.podcast.description=function(t){var e="",i=[];return t.each(function(){var t=$(this);i.indexOf(t.text())<0&&(e&&(e+="<br>"),e+=t.text(),i.push(t.text()))}),e}(a.find("rss > channel > description")),i.podcast.link=a.find("rss > channel > link").text(),i.podcast.pubDate=e(a.find("rss > channel > pubDate").text()),""===i.podcast.pubDate&&(i.podcast.pubDate=e(a.find("rss > channel > lastBuildDate").text())),i.podcast.image=$(a.find("rss > channel > image > url")[0]).text(),void 0!==i.podcast.image&&""!==i.podcast.image||(i.podcast.image=a.find("rss > channel > image").attr("href")),a.find("rss > channel > item").each(function(){var t,n=$(this),a={};a.title=$(n.find("title")[0]).text(),a.link=n.find("link").text(),a.pubDate=e(n.find("pubDate").text()),a.parsedPubDate=new Date(a.pubDate),a.description=n.find("description").text(),a.guid=n.find("guid").text(),t=n.find("enclosure"),a.enclosure={url:t.attr("url"),length:t.attr("length"),type:t.attr("type")},i.episodes.push(a)}),i.episodes.sort(function(t,e){return e.parsedPubDate-t.parsedPubDate}),i.episodes[0]&&i.episodes[0].pubDate&&(void 0===i.podcast.pubDate||""===i.podcast.pubDate||new Date(i.episodes[0].pubDate)>new Date(i.podcast.pubDate))&&(i.podcast.pubDate=i.episodes[0].pubDate),i):i}angular.module("podStationReusables",[]),function(){"use strict";function t(){return{parseRSSFeed:parsePodcastFeed}}angular.module("podStationReusables").factory("feedParserService",t)}(),function(){"use strict";function t(t,e){function i(t,e){var i=e.find(function(e){return e.feedUrl===t.feedUrl});i?i.merge(t):e.push(t)}function n(e,n){var a=[],r=!1,d=!1;t.get("http://api.digitalpodcast.com/v2r/search/",{params:{appid:"0f56b00cfbdc051c29b88171e67507f3",format:"rssopml",keywords:e}}).then(function(t){$($.parseXML(t.data)).find("opml > body > outline").each(function(){var t=$(this),e=new s;e.title=t.attr("text"),e.description=t.attr("description"),e.link=t.attr("htmlUrl"),e.feedUrl=t.attr("xmlUrl"),e.subscribed=!1,i(e,a)}),n("resultAvailable",a)}).finally(function(){(r=!0)&&d&&n("searchFinished")}),t.get("https://itunes.apple.com/search",{params:{media:"podcast",term:e}}).then(function(t){t.data.results.forEach(function(t){var e=new s;e.title=t.collectionName,e.itunesLink=t.collectionViewUrl,e.feedUrl=t.feedUrl,e.subscribed=!1,e.image=t.artworkUrl100,i(e,a)}),n("resultAvailable",a)}).finally(function(){d=!0,r&&d&&n("searchFinished")})}var a={search:n},s=function(){return this.title="",this.feedUrl="",this.description="",this.link="",this.itunesLink="",this.image="",this.merge=function(t){""!==t.description&&(this.description=t.description),""!==t.link&&(this.link=t.link),""!==t.image&&(this.image=t.image),""!==t.itunesLink&&(this.itunesLink=t.itunesLink)},this};return a}angular.module("podStationReusables").factory("searchService",["$http","$q",t])}();