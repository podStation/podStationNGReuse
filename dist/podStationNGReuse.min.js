angular.module("podStationReusables",[]),function(){"use strict";function t(t,i){function e(t,i){var e=i.find(function(i){return i.feedUrl===t.feedUrl});e?e.merge(t):i.push(t)}function n(i,n){var r=[],a=!1,l=!1;t.get("http://api.digitalpodcast.com/v2r/search/",{params:{appid:"0f56b00cfbdc051c29b88171e67507f3",format:"rssopml",keywords:i}}).then(function(t){$($.parseXML(t.data)).find("opml > body > outline").each(function(){var t=$(this),i=new s;i.title=t.attr("text"),i.description=t.attr("description"),i.link=t.attr("htmlUrl"),i.feedUrl=t.attr("xmlUrl"),i.subscribed=!1,e(i,r)}),n("resultAvailable",r)}).finally(function(){(a=!0)&&l&&n("searchFinished")}),t.get("https://itunes.apple.com/search",{params:{media:"podcast",term:i}}).then(function(t){t.data.results.forEach(function(t){var i=new s;i.title=t.collectionName,i.itunesLink=t.collectionViewUrl,i.feedUrl=t.feedUrl,i.subscribed=!1,i.image=t.artworkUrl100,e(i,r)}),n("resultAvailable",r)}).finally(function(){l=!0,a&&l&&n("searchFinished")})}var r={search:n},s=function(){return this.title="",this.feedUrl="",this.description="",this.link="",this.itunesLink="",this.image="",this.merge=function(t){""!==t.description&&(this.description=t.description),""!==t.link&&(this.link=t.link),""!==t.image&&(this.image=t.image),""!==t.itunesLink&&(this.itunesLink=t.itunesLink)},this};return r}angular.module("podStationReusables").factory("searchService",["$http","$q",t])}();